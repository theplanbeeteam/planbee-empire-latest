{"version":3,"sources":["webpack:///./source/scripts/sections/StaticCollection.js"],"names":["StaticCollection","section","$el","$","el","context","data","collectionUrl","$focusItem","defaultView","grid_list","filtersContentSelector","sortContent","$sortTrigger","find","$sortTriggerButton","$sortTriggerModal","$filtersTrigger","$filtersContent","$allTags","$advancedTags","$additionalTags","$viewToggle","$gridContainer","filterCheckboxes","querySelectorAll","_changeSorting","bind","_changeSortingButton","_showSortModal","_showFiltersModal","_activateTag","_advancedTags","_toggleTags","_toggleView","_checkListView","events","on","e","currentTarget","productItems","fillAnimations","checkAnimations","_initAnimations","_setSortByQueryParameters","modal","Modal","forEach","tagHandle","dataset","handle","checkmark","querySelector","checkmarkCheck","state","closest","filterActive","fillAnimation","transition","checkAnimation","off","unload","Object","keys","key","productItem","view","$productItems","each","i","push","ProductGridItem","id","lazy","event","preventDefault","open","currentFilterItem","currentGroup","activeTags","itemTag","animateTo","target","href","getAttribute","filterItem","filterItemTag","_deactivateTags","then","length","location","link","$target","parent","filterGroups","filterHandles","index","filterGroup","selectedItems","_updateLocation","join","filter","indexOf","$trigger","$items","siblings","siblingsVisible","toggleClass","text","see_less","see_more","isOpen","position","Shopify","queryParams","search","aCouples","substr","split","aKeyValue","decodeURIComponent","activeClass","addClass","removeClass","sort_by","val","jQuery","param","replace","attr","url","replaceIndex","firstHalf","secondHalf","concat","className","_initProductItems"],"mappings":"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","file":"StaticCollection.bundle.js","sourcesContent":["import $ from 'jquery';\nimport { transition } from '@pixelunion/animations';\n\nimport ProductGridItem from '../components/ProductGridItem';\nimport Modal from '../components/Modal';\n\nexport default class StaticCollection {\n  constructor(section) {\n    this.section = section;\n    this.$el = $(section.el);\n    this.el = section.el;\n    this.context = section.data.context;\n    this.collectionUrl = this.context.collectionUrl;\n    this.$focusItem = null;\n    this.defaultView = this.context.grid_list;\n\n    this.filtersContentSelector = '[data-productgrid-filters-content]';\n    this.sortContent = '[data-productgrid-sort-content]';\n    this.$sortTrigger = this.$el.find('[data-productgrid-trigger-sort]');\n    this.$sortTriggerButton = this.$el.find('[data-productgrid-trigger-sort-button]');\n    this.$sortTriggerModal = this.$el.find('[data-productgrid-modal-sort]');\n    this.$filtersTrigger = this.$el.find('[data-productgrid-trigger-filters]');\n    this.$filtersContent = this.$el.find(this.filtersContentSelector);\n    this.$allTags = this.$filtersContent.find('.filter-item a:not([data-filter-toggle])');\n    this.$advancedTags = this.$el.find('[data-tag-advanced] a');\n    this.$additionalTags = this.$el.find('[data-filter-toggle]');\n    this.$viewToggle = this.$el.find('[data-collection-view]');\n    this.$gridContainer = this.$el.find('.productgrid--outer');\n    this.filterCheckboxes = this.el.querySelectorAll('.filter-icon--checkbox');\n\n    this._changeSorting = this._changeSorting.bind(this);\n    this._changeSortingButton = this._changeSortingButton.bind(this);\n    this._showSortModal = this._showSortModal.bind(this);\n    this._showFiltersModal = this._showFiltersModal.bind(this);\n    this._activateTag = this._activateTag.bind(this);\n    this._advancedTags = this._advancedTags.bind(this);\n    this._toggleTags = this._toggleTags.bind(this);\n\n    this._toggleView = this._toggleView.bind(this);\n    this._checkListView = this._checkListView.bind(this);\n\n    this.events = [\n      this.$sortTrigger.on('change.collection', this._changeSorting),\n      this.$sortTriggerButton.on('click.collection', this._changeSortingButton),\n      this.$sortTriggerModal.on('click.collection', this._showSortModal),\n      this.$filtersTrigger.on('click.collection', this._showFiltersModal),\n      this.$allTags.on('click.collection', (e) => this._activateTag(e.currentTarget)),\n      this.$additionalTags.on('click.collection', this._toggleTags),\n      this.$viewToggle.on('click.collection', this._toggleView),\n    ];\n\n    // Product items\n    this.productItems = [];\n    this.fillAnimations = {};\n    this.checkAnimations = {};\n\n    this._initAnimations();\n    this._setSortByQueryParameters();\n    this._checkListView();\n    this.modal = new Modal();\n  }\n\n  /**\n   * Initialize animations on checkbox container\n   * using filter tag as JSON key\n   */\n  _initAnimations() {\n    this.filterCheckboxes.forEach(el => {\n      const tagHandle = el.dataset.handle;\n      const checkmark = el.querySelector('.checkmark');\n      const checkmarkCheck = el.querySelector('.checkmark__check');\n      let state = 'unchecked';\n\n      if (el.closest('.filter-item').dataset.filterActive === \"true\") {\n        state = 'checked';\n      }\n\n      const fillAnimation = transition({ el: checkmark, state });\n      const checkAnimation = transition({ el: checkmarkCheck, state });\n\n      this.fillAnimations[tagHandle] = fillAnimation;\n      this.checkAnimations[tagHandle] = checkAnimation;\n    });\n  }\n\n  onSectionUnload() {\n    this.events.forEach($el => $el.off('.collection'));\n    this.modal.unload();\n\n    Object.keys(this.fillAnimations).forEach(key => {\n      this.fillAnimations[key].unload();\n      this.checkAnimations[key].unload();\n    });\n\n    this.productItems.forEach(productItem => {\n      productItem.unload();\n    });\n  }\n\n  _initProductItems(view = 'grid-view') {\n    const $productItems = this.$el.find('[data-product-item]');\n\n    $productItems.each((i, productItem) => {\n      this.productItems.push(\n        new ProductGridItem({\n          el: productItem,\n          id: this.section.id,\n          lazy: true,\n          grid_list: view,\n        }),\n      );\n    });\n  }\n\n  /**\n   * Open Tags/Filters modal (on mobile)\n   *\n   * @param event\n   * @private\n   */\n  _showFiltersModal(event) {\n    event.preventDefault();\n\n    this.$focusItem = $(event.currentTarget);\n    this.modal.open(this.filtersContentSelector, 'productgrid-filters');\n  }\n\n  /**\n   * Open Sort by modal (on mobile)\n   *\n   * @param event\n   * @private\n   */\n  _showSortModal(event) {\n    event.preventDefault();\n\n    this.$focusItem = $(event.currentTarget);\n    this.modal.open(this.sortContent, 'productgrid-sort');\n  }\n\n  _deactivateTags(currentFilterItem) {\n    const currentGroup = currentFilterItem.closest('[data-filter-group]');\n    const activeTags = currentGroup.querySelectorAll('[data-filter-active=\"true\"]');\n\n    activeTags.forEach(el => {\n      const itemTag = el.dataset.handle;\n\n      currentGroup.querySelector(`.filter-item[data-handle='${itemTag}']`).dataset.filterActive = false;\n\n      if (this.fillAnimations[itemTag] && this.checkAnimations[itemTag]) {\n        this.fillAnimations[itemTag].animateTo('unchecked');\n        this.checkAnimations[itemTag].animateTo('unchecked');\n      }\n    });\n  }\n\n  /**\n   * Style a tag as active after click, before page transition\n   *\n   * @param event\n   * @private\n   */\n  _activateTag(target) {\n    event.preventDefault();\n    const href = target.getAttribute('href');\n    const filterItem = target.closest('.filter-item');\n    const filterItemTag = filterItem.dataset.handle;\n    let animateTo = 'checked';\n\n    if (filterItem.dataset.filterActive === 'true') {\n      animateTo = 'unchecked';\n    }\n\n    this._deactivateTags(filterItem);\n    if (animateTo === 'checked') {\n      filterItem.dataset.filterActive = true;\n    } else {\n      filterItem.dataset.filterActive = false;\n    }\n\n    if (this.fillAnimations[filterItemTag] && this.checkAnimations[filterItemTag]) {\n      this.fillAnimations[filterItemTag].animateTo(animateTo);\n      this.checkAnimations[filterItemTag]\n        .animateTo(animateTo)\n        .then(() => {\n          if (this.$advancedTags.length === 0) {\n            location.href = href;\n          } else {\n            this._advancedTags($(target));\n          }\n        });\n    } else {\n      // If the animation is not registered to the tag, it is a swatch and should\n      // go straight to the advanced tags function\n      this._advancedTags($(target));\n    }\n  }\n\n  /**\n   * Used by advanced tags to concatenate tag searches\n   *\n   * @param event\n   * @private\n   */\n  _advancedTags(link) {\n    const $target = link.parent();\n    const $filtersContent = $target.closest('nav');\n    const filterGroups = $filtersContent.find('[data-filter-group]');\n    const filterHandles = [];\n\n    // Build the filter for the url based on what is in the dom\n    filterGroups.each((index, filterGroup) => {\n      const selectedItems = filterGroup.querySelectorAll('[data-filter-active=\"true\"]');\n\n      if (selectedItems.length) {\n        filterHandles.push($(selectedItems).data('handle'));\n      }\n    });\n    this._updateLocation(filterHandles.join('+'));\n  }\n\n  _updateLocation(filter) {\n    if (this.collectionUrl.indexOf('vendors') > -1) {\n      location.href = `${this.collectionUrl}&constraint=${filter}`;\n    } else {\n      location.href = `${this.collectionUrl}/${filter}`;\n    }\n  }\n\n  /**\n   * Expand / Collapse additional tags in the sidebar\n   *\n   * @param event\n   * @private\n   */\n  _toggleTags(event) {\n    event.preventDefault();\n\n    const $trigger = $(event.currentTarget);\n    const $items = $trigger.parent().siblings('[data-hidden-default]');\n    const siblingsVisible = $trigger.data('filter-toggle');\n\n    $items.toggleClass('filter-item--hidden', siblingsVisible);\n    $trigger\n      .data('filter-toggle', !siblingsVisible)\n      .text(!siblingsVisible ? this.context.see_less : this.context.see_more);\n\n    if (this.modal.isOpen()) {\n      this.modal.position();\n    }\n  }\n\n  /**\n   * Make Shopify aware of releavent collection search info\n   *  - tag\n   *  - vendor\n   *  - pagination\n   *  - sorting criteria\n   *\n   * @private\n   */\n  _setSortByQueryParameters() {\n    Shopify.queryParams = {};\n    if (location.search.length) {\n      for (let i = 0, aCouples = location.search.substr(1).split('&'); i < aCouples.length; i++) {\n        const aKeyValue = aCouples[i].split('=');\n        // Reset the page number when we apply (i.e. don't add it to params)\n        if (aKeyValue.length > 1 && aKeyValue[0] !== 'page') {\n          Shopify.queryParams[decodeURIComponent(aKeyValue[0])] = decodeURIComponent(aKeyValue[1]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Sort by opens a modal on mobile, this handles button events\n   *\n   * @param event\n   * @private\n   */\n  _changeSortingButton(event) {\n    const activeClass = 'utils-sortby--modal-button--active';\n\n    $(event.currentTarget)\n      .addClass(activeClass)\n      .parent()\n      .siblings()\n      .find(`.${activeClass}`)\n      .removeClass(activeClass);\n\n    this._changeSorting(event);\n  }\n\n  /**\n   * Change sorting of collection\n   *\n   * @param event\n   * @private\n   */\n  _changeSorting(event) {\n    event.preventDefault();\n    const $target = $(event.currentTarget);\n\n    Shopify.queryParams.sort_by = $target.val();\n    location.search = jQuery.param(Shopify.queryParams).replace(/\\+/g, '%20');\n  }\n\n  /**\n   * Toggle grid or list view\n   *\n   */\n  _toggleView(event) {\n    const $target = $(event.currentTarget);\n    Shopify.queryParams.grid_list = $target.data('collection-view');\n    location.search = jQuery.param(Shopify.queryParams).replace(/\\+/g, '%20');\n  }\n\n  /**\n   * Check grid/list view toggle query parameters\n   *\n   */\n  _checkListView() {\n    const view = Shopify.queryParams.grid_list ? Shopify.queryParams.grid_list : this.defaultView;\n    this.$el.find('[href*=\"&grid_list\"]')\n      .attr('href',\n        (i, url) => {\n          let href = url;\n          if (url.indexOf('?') < 0) {\n            const replaceIndex = url.indexOf('&');\n            const firstHalf = url.substr(0, replaceIndex);\n            const secondHalf = url.substr(replaceIndex + 1);\n\n            href = firstHalf.concat('?', secondHalf);\n          }\n          href = href.replace('grid_list', `grid_list=${view}`);\n          return href;\n        });\n\n    this.$el.find('.utils-viewtoggle-button').removeClass('active');\n    $(`[data-collection-view=${view}]`).addClass('active');\n    const className = view.replace('-', '');\n    this.$gridContainer.addClass(`productgrid-${className}`);\n\n    if (className === 'listview') {\n      this.$gridContainer.removeClass('productgrid-gridview');\n    } else {\n      this.$gridContainer.removeClass('productgrid-listview');\n    }\n\n    this._initProductItems(view);\n  }\n}\n"],"sourceRoot":""}